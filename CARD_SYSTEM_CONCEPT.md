# HypoLab カードシステム構想

## 概要
仮説検証の達成/未達成に応じてカードを獲得し、ゲーミフィケーション要素を強化するシステム

## 基本ルール
- **達成基準**: 80%以上で報酬カード獲得、80%未満でペナルティカード獲得
- **報酬カード**: 仮説作成時に使用するか選択
- **ペナルティカード**: 獲得と同時に自動発動（次の仮説に影響）
- **対象ユーザー**: 個人利用のみ（マルチユーザー要素なし）

## 報酬カード案

### 期間操作系
- 🎯 **スナイパー**: 期間を好きな日数に固定できる（3-30日の範囲）
- 🔄 **リロール**: シャッフル結果が気に入らなければ3回まで振り直し
- ➕ **エクステンド**: 決まった期間に+5日追加
- ➖ **スプリント**: 決まった期間を-3日短縮

### 達成サポート系
- 🛡️ **セーフティネット**: 未達成を3日分まで自動で達成扱い
- 📉 **イージー**: この仮説の達成基準を60%に下げる
- 🎁 **ヘッドスタート**: 最初の3日間は自動達成
- 💫 **ラストスパート**: 最後の3日間は自動達成

### 特殊効果系
- 🎲 **ダブルチャンス**: 失敗してもペナルティなしでもう一度挑戦可
- 🏃 **クイックウィン**: 50%達成で成功扱い（ただし期間は7日以内限定）
- 🌟 **パーフェクトボーナス**: 100%達成なら報酬カード2枚追加
- 🔮 **フォーチュン**: この仮説でペナルティカードを引いても無効化

## ペナルティカード案

### 期間制約系
- ⏰ **ショートオンリー**: 次は必ず短期間（3-5日）
- 📏 **ロングオンリー**: 次は必ず長期間（20-30日）
- 🎰 **ランダムロック**: 期間選択不可、完全ランダム
- 🔢 **奇数縛り**: 奇数日数のみ（3,5,7,9...）

### 難易度上昇系
- 📈 **ハードモード**: 達成基準90%
- 🎯 **パーフェクト**: 100%達成のみ成功
- ⚡ **ノーミス**: 3日連続未達成で即失敗
- 🚫 **カード封印**: 報酬カード使用不可

### 特殊制約系
- 🔁 **リトライ**: 同じ仮説内容で再挑戦必須
- 📝 **詳細記録**: 毎日100文字以上の振り返り必須
- 🎭 **反転**: 達成基準が「やらない」系の仮説必須（例：SNSを見ない）

## 実装計画

### Phase 1: 最小実装（2-3種類）
**報酬カード**:
- イージー（達成基準60%）
- ヘッドスタート（最初の3日自動達成）

**ペナルティカード**:
- ハードモード（達成基準90%）
- ショートオンリー（3-5日固定）

### Phase 2: 基本セット（8-10種類）
期間操作系と基本的な効果の組み合わせを追加

### Phase 3: 完全版（20種類以上）
特殊効果、レアカード、複雑な条件を実装

## 技術的な実装方針

### データ構造案
```javascript
// カード定義
card = {
  id: "easy_mode",
  name: "イージー",
  type: "reward",
  rarity: "common",
  effect: {
    type: "achievement_rate",
    value: 60,
    timing: "on_start"
  },
  description: "この仮説の達成基準を60%に下げる"
}

// ユーザーの所持カード
userCards = {
  userId: "xxx",
  inventory: ["easy_mode", "headstart", ...],
  usedCards: [
    {cardId: "easy_mode", usedAt: "2024-01-01", hypothesisId: "yyy"}
  ],
  activeEffects: [
    {cardId: "hard_mode", appliedTo: "next_hypothesis"}
  ]
}
```

### 実装の優先順位
1. カードデータ構造の定義
2. 基本的な効果の実装（達成率変更、期間固定）
3. カード獲得ロジック
4. カード使用UI
5. ガチャ演出
6. 複雑な効果の実装

## 実装見積もり
- **基本システム（5種類程度）**: 1-2週間
- **中規模（10種類）**: 3-4週間
- **完全版（20種類+演出）**: 6-8週間

## メモ
- 段階的に実装することが重要
- まずは最もシンプルな効果から始める
- UIは後回しにして、まず機能を確実に実装
- 各カード効果は独立してテスト可能にする