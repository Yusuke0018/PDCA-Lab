# 🧪 PDCA-Lab - 習慣管理アプリ

## 📱 概要

PDCA-Labは、習慣の形成と継続を支援するモバイルファーストのWebアプリケーションです。ゲーミフィケーション要素を取り入れ、楽しみながら習慣を身につけることができます。

### 🌟 主な特徴
- 🎯 習慣の作成・管理・追跡
- 💰 ポイントシステムとレベル機能
- 🎮 カードシステムとガチャ要素
- 🏆 チャレンジシステム（デイリー/ウィークリー）
- 📊 詳細な統計とビジュアライゼーション
- 📱 PWA対応（オフライン動作可能）

## 🚀 アクセス方法

### オンライン版
https://yusuke0018.github.io/PDCA-Lab/

### ローカル版
1. リポジトリをクローン
```bash
git clone https://github.com/Yusuke0018/PDCA-Lab.git
cd PDCA-Lab
```
2. `hypolab-local.html`をブラウザで開く

## 📖 機能詳細

### 1. 🎯 習慣管理システム

#### 習慣の作成
- **基本情報**
  - タイトル（100文字以内）
  - 詳細説明（1000文字以内）
  - カテゴリー選択（📚勉強・💪運動・📖読書・🧘養生）
  
- **目標設定**
  - 朝の1行宣言（期待する変化を定義）
  - IF-THENルール（トリガーと行動のペア設定）
  
- **期間設定**
  - 短期（3-7日）
  - 中期（8-14日）
  - 長期（15-30日）
  - シャッフル機能でランダム決定
  
- **実施頻度**
  - 毎日実施
  - 週に◯回（1-7回指定）
  - 特定の曜日指定

#### 習慣の管理
- **頻度別表示**
  - 📅 毎日の習慣セクション
  - 📆 週の習慣セクション
  - それぞれ習慣数をカウント表示

- **カテゴリー別表示**
  - 毎日/週の習慣それぞれでカテゴリー分類
  - カテゴリーごとにトグル開閉
  - 習慣数をバッジ表示
  - 開閉状態の保存
  - 習慣詳細画面でカテゴリー変更可能
  
- **進捗管理**
  - カレンダービューで達成状況を確認
  - 達成率の自動計算
  - 連続達成日数（ストリーク）表示
  
- **強度設定**
  - 軽め（0.8倍）
  - 基本（1.0倍）
  - 高強度（1.2倍）
  - カスタム強度設定可能

#### 習慣の継続
- **習慣モード**: 21日達成で自動的に習慣化
- **無期限モード**: 期限なしで継続可能
- **リセット機能**: 未達成日をリセット

### 2. 💰 ポイントシステム

#### ポイント獲得方法

##### 習慣達成ポイント
- 基本ポイント: 3pt × 強度倍率
- 連続達成ボーナス:
  - 3日連続: +1pt
  - 7日連続: +3pt
  - 14日連続: +5pt
  - 21日連続: +7pt
  - 30日連続: +10pt

##### 努力ボーナス
- 1日無制限で記録可能
- 1回あたり1-3pt選択可能
- 11種類のカテゴリー:
  - 🌅 早起き・朝活
  - 💪 運動・トレーニング
  - 📚 勉強・学習
  - 💼 仕事・作業
  - 🥗 健康・食事
  - 🧹 掃除・整理整頓
  - 🧘 瞑想・リラックス
  - 👥 人間関係・交流
  - 🎨 創造・趣味
  - 🎯 新しい挑戦
  - ✨ その他

##### チャレンジ達成ポイント
- デイリーチャレンジ: 1-5pt
- ウィークリーチャレンジ: 5-20pt
- カスタムチャレンジ: 1-30pt

#### レベルシステム
10段階のレベルと称号:
- Lv.1 初心者（0-50pt）
- Lv.2 見習い（51-150pt）
- Lv.3 習慣家（151-300pt）
- Lv.4 実践者（301-500pt）
- Lv.5 達人（501-750pt）
- Lv.6 マスター（751-1100pt）
- Lv.7 グランドマスター（1101-1500pt）
- Lv.8 レジェンド（1501-2000pt）
- Lv.9 神（2001-2600pt）
- Lv.10+ 超越者（2601pt〜、700pt毎にレベルアップ）

#### 報酬システム
- **カスタム報酬作成**
  - 名前、必要ポイント、アイコン設定
  - 7つのカテゴリー（休憩・娯楽・食事・買い物・体験・自由時間・その他）
  - メモ機能で詳細管理
  
- **報酬の使用**
  - ポイントを消費して報酬獲得
  - 使用履歴の記録
  - お気に入り機能（開発予定）

### 3. 🏆 チャレンジシステム

#### デイリーチャレンジ（15種類）
- 5分間瞑想（3pt）
- 30分間電子機器に触らない（4pt）
- バーピー+10回（5pt）
- 読書+5分（3pt）
- 英語復習（3pt）
- 新しいレシピに挑戦（4pt）
- 1万歩歩く（5pt）
- コールドシャワー（3pt）
- 日記を書く（2pt）
- 深呼吸エクササイズ（2pt）
- デジタルデトックス1時間（3pt）
- 片付け15分（2pt）
- 感謝を3つ書く（2pt）
- 野菜を5種類食べる（3pt）
- 8時間睡眠（3pt）

#### ウィークリーチャレンジ（8種類）
- 新しい習慣を作る（15pt）
- ウォーキング週一回追加（10pt）
- 部屋の大掃除（1エリア）（12pt）
- 知らない人と会話する（15pt）
- 早起き3日連続（20pt）
- 7日連続で習慣達成（20pt）
- 週3回運動する（12pt）
- 週末デジタルデトックス（半日）（15pt）

#### カスタムチャレンジ
- 独自のチャレンジを作成
- デイリー/ウィークリー選択
- 1-30ptの報酬設定
- カテゴリー分類
- 削除・管理機能

#### チャレンジ機能
- **達成管理**: 完了ボタンで簡単記録
- **取り消し機能**: 誤操作時の取り消し可能
- **統計表示**: 
  - 連続達成日数（ストリーク）
  - 今週の達成数
  - 総達成数
  - 履歴表示（最新10件）

### 4. 🎮 カードシステム

#### 報酬カード（6種類）
- **スキップチケット**: その日の習慣を達成扱いに
- **達成ブースト**: 3日間達成時に+2ptボーナス
- **パーフェクトボーナス**: 完璧な日に+10pt
- **プロテクトシールド**: ペナルティを1回防ぐ
- **達成率ブースター**: 未来の3日分を事前達成
- **セカンドチャンス**: 過去の未達成を達成に変更

#### ペナルティカード（4種類）
- **ハードモード**: +50%ポイントだが失敗でリセット
- **リセットリスク**: 3日連続失敗でリセット
- **達成率低下**: 開始時-10%
- **短期限定**: 次は短期間のみ選択可

#### ガチャシステム
- 習慣完了後にカードガチャ
- レアリティ設定（コモン〜ウルトラレア）
- カード保管庫で管理

### 5. 📊 統計・分析機能

#### ホーム画面統計
- 現在の習慣数
- 累計達成日数
- 平均達成率
- 現在のストリーク

#### 統計画面の詳細分析
- **期間別統計**
  - 今月/先月/全期間の切り替え
  - 達成率の推移
  
- **習慣ランキング**
  - 達成率TOP5表示
  - 習慣別のパフォーマンス
  
- **曜日別分析**
  - 曜日ごとの達成率
  - 得意な曜日の把握
  
- **カレンダービュー**
  - 月間の達成状況一覧
  - 視覚的な進捗確認
  
- **強度分析**
  - A/B/C分類の分布
  - ドーナツチャートで可視化

### 6. 🌱 習慣成長システム

#### 7段階の成長ステージ
1. **🌱 種まき期**（1-3日）: スコア10点
2. **🌿 発芽期**（4-7日）: スコア25点
3. **🌳 成長期**（8-14日）: スコア50点
4. **🌸 開花期**（15-21日）: スコア75点
5. **🍎 結実期**（22-30日）: スコア100点
6. **🏆 収穫期**（31-60日）: スコア150点
7. **👑 黄金期**（61日以上）: スコア200点

各ステージで連続達成日数と達成率に応じたスコアを獲得

### 7. 🎨 UI/UX機能

#### ナビゲーション
- **下部タブバー**: 4つの主要画面へ簡単アクセス
  - 🏠 ホーム
  - 📊 統計
  - 💰 ポイント
  - 🎴 カード
  
- **スワイプ対応**: 左右スワイプで画面切り替え

#### ビジュアルデザイン
- **ダークモード**: 目に優しい暗色テーマ
- **グラデーション**: 美しいカラーグラデーション
- **アニメーション**: スムーズな画面遷移
- **レスポンシブ**: 全デバイス対応

#### PWA機能
- **オフライン動作**: ネット接続不要
- **ホーム画面追加**: アプリとして利用可能
- **フルスクリーン**: 没入感のある体験

### 8. 📝 その他の機能

#### 朝の宣言システム
- 毎朝の目標宣言
- 宣言状態の記録
- モチベーション維持

#### IF-THENプランニング
- 実行トリガーの設定
- 行動の自動化支援
- 習慣化の促進

#### データ管理
- **自動保存**: LocalStorageに自動保存
- **データ永続化**: ブラウザ内で永続保存
- **エクスポート機能**: バックアップ対応（開発予定）

## 🎮 使い方ガイド

### 初期設定
1. アプリにアクセス
2. 「➕ 新規習慣立案」をタップ
3. 習慣の詳細を入力:
   - タイトル（例: 毎日10分瞑想）
   - 詳細説明
   - カテゴリー選択
   - 朝の1行宣言
   - IF-THENルール（任意）
4. 期間と頻度を設定
5. シャッフルで期間決定
6. 作成完了

### 日々の使い方
1. **習慣の記録**
   - ホーム画面から習慣をタップ
   - カレンダーで今日をタップ
   - 強度を選択
   - メモを追加（任意）

2. **努力ボーナス**
   - ホーム画面の「💪 努力を記録する」
   - カテゴリー選択
   - ポイント選択（1-3pt）
   - 記録

3. **チャレンジ**
   - デイリー/ウィークリーチャレンジ確認
   - 達成したら「✅ 完了」
   - ポイント獲得

4. **報酬の使用**
   - ポイント画面→報酬タブ
   - 使いたい報酬を選択
   - ポイント消費

### カスタマイズ
- **カスタム報酬**: ポイント画面→作成タブ→報酬作成
- **カスタムチャレンジ**: ポイント画面→作成タブ→チャレンジ作成
- **カテゴリー管理**: ホーム画面でトグル開閉

## 🛠️ 技術仕様

### 対応環境
- **ブラウザ**: Chrome 90+, Safari 14+, Firefox 88+, Edge 90+
- **デバイス**: スマートフォン（推奨）、タブレット、PC
- **OS**: iOS, Android, Windows, macOS

### 使用技術
- HTML5
- CSS3（カスタムプロパティ）
- Vanilla JavaScript（ES6+）
- LocalStorage API
- Service Worker（PWA）
- Canvas API（アニメーション）

### データ構造
```javascript
{
  currentHypotheses: [        // 現在の習慣
    {
      id: string,
      title: string,
      description: string,
      category: 'study'|'exercise'|'reading'|'wellness',
      frequency: {
        type: 'daily'|'weekly'|'weekdays',
        count: number,        // 週何回
        weekdays: number[]    // 曜日指定
      },
      startDate: string,
      totalDays: number,
      achievements: {},       // 達成記録
      intensity: {},          // 強度記録
      declarations: {},       // 宣言記録
      habitMode: boolean,     // 習慣モード
      isUnlimited: boolean    // 無期限フラグ
    }
  ],
  completedHypotheses: [],    // 完了した習慣
  pointSystem: {              // ポイントシステム
    currentPoints: number,
    lifetimeEarned: number,
    lifetimeSpent: number,
    currentLevel: number,
    levelProgress: number,
    transactions: [],         // 取引履歴
    customRewards: [],        // カスタム報酬
    dailyEffortUsed: number,  // 日別努力使用回数
    dailyEffortLastReset: string
  },
  challenges: {               // チャレンジ
    daily: {},               // デイリー達成状況
    weekly: {},              // ウィークリー達成状況
    customChallenges: [],    // カスタムチャレンジ
    completedToday: [],      // 今日完了
    completedThisWeek: [],   // 今週完了
    history: [],             // 履歴
    streak: number,          // 連続達成日数
    lastStreakDate: string
  },
  cards: {                    // カード
    inventory: [],           // 所持カード
    activeEffects: [],       // 有効な効果
    pendingPenalties: []     // 保留中のペナルティ
  }
}
```

## 🚀 今後の実装予定

### 近日実装
- [ ] データのエクスポート/インポート
- [ ] 報酬のお気に入り機能
- [ ] チャレンジ難易度設定
- [ ] 報酬バッジシステム

### 中期計画
- [ ] クラウド同期
- [ ] ソーシャル機能
- [ ] AIによる習慣提案
- [ ] 音声メモ機能

### 長期計画
- [ ] ウィジェット機能
- [ ] Apple Watch/Wear OS対応
- [ ] デスクトップアプリ版
- [ ] 多言語対応

## 📝 更新履歴

### 2025年1月18日 - v3.1.1
#### 🐛 バグ修正と改善

##### 習慣達成のポイント計算修正
- **習慣達成取り消し時のポイント減算**
  - 取り消し時に強度に応じたポイントが正しく減算されるように修正
  - トランザクション履歴にも記録

- **強度によるポイント計算の修正**
  - 軽め（×0.8）: 1ポイント
  - 基本（×1.0）: 2ポイント
  - 高強度（×1.2）: 3ポイント
  - 以前は倍率計算だったが、固定ポイント制に変更

##### 強度選択UIの改善
- **過去の習慣達成時の強度選択**
  - 過去の日付をクリック時も強度選択モーダルが表示されるように
  - 強度を選択してから達成状態になる仕様に統一

- **強度パネルの仕様変更**
  - 下部の「今日の強度」パネルの選択ボタンを無効化
  - 編集ボタンは有効（強度名のカスタマイズは可能）
  - 強度選択はカレンダーから統一的に行う仕様に
  - 選択状態の表示を廃止（混乱を避けるため）

### 2025年1月16日 - v3.1.0
#### ✨ 新機能

##### 🎴 カードシステム大幅拡充（14種類追加）
- **新規報酬カード（8種類）**
  - 🎪 イベントトリガー：明日のイベント発生確率を100%にする
  - 🔮 イベントコンボ：3日間連続でイベントが発生する
  - 💎 ポイントジェム：次の3日間、獲得ポイントが2倍になる
  - 🎯 ミッションマスター：今日のミッションが自動達成される
  - 🌈 レインボーブースト：全カテゴリーの習慣が今日は2倍ポイント
  - ⚡ クイックスタート：次の習慣の最初の3日が自動達成
  - 🔥 連続達成ボーナス：7日連続達成でレアカード確定
  - 🎰 ラッキーセブン：今日から7日間、カードドロップ率2倍

- **新規ペナルティカード（4種類）**
  - 🌑 イベント封印：3日間イベントが発生しない
  - ⛓️ ミッション追加：今日のミッションが2つ追加される
  - 🕸️ スローダウン：3日間獲得ポイントが0.5倍
  - 🎭 逆転の呪い：3日間、達成と未達成の効果が反転

- **特殊カード（2種類）**
  - 🪄 変換の魔法：ペナルティカード1枚を報酬カードに変換
  - 🎲 運命のダイス：ランダムで報酬かペナルティ効果が発動（50/50）

##### 🔧 システム連携強化
- **イベントシステムとカードの連携**
  - 強制イベント発生機能
  - イベント封印機能
  - カード効果によるブースト制御

- **ポイント計算の統合**
  - カード効果を自動適用
  - 複数効果の重複計算対応
  - 期間限定効果の管理

#### 🐛 バグ修正
- 統計画面の曜日別達成率表示を修正（従来データも正しく集計）

### 2025年1月15日 - v3.0.0
#### ✨ 新機能

##### 🎯 ミッション型チャレンジシステム
- **習慣達成ミッション追加**
  - デイリーミッション12種類（習慣3つ達成、C強度5つ達成など）
  - ウィークリーミッション10種類（週50回達成、毎日1つ以上達成など）
  - 自動達成チェック機能（条件を満たすと「🟢 達成可能！」表示）
  - 条件未達成時は完了ボタンが無効化

##### 🎉 期間中イベントシステム
- **ランダムブーストイベント（14種類）**
  - 強度系：A強度1.5倍、全強度+0.3倍
  - カテゴリー系：運動2倍、勉強+5ポイント
  - 時間帯系：早起きボーナス（6-9時）、夜型ボーナス（20-23時）
  - 特殊系：パーフェクトデー（+30pt）、ダブルポイントデー（2倍）
  - 週末限定：努力ボーナス無制限
  - カード系：ドロップ率UP、レアカードチャンス

- **イベント発生確率**
  - 0個：50%（通常の日）
  - 1個：45%（イベント発生）
  - 2個：5%（レアな幸運日）

- **マイルストーン報酬**
  - 7日達成：ボーナスポイント＋励ましメッセージ
  - 14日達成：大量ポイント＋特別カード
  - 21日達成：超大量ポイント＋レアカード＋特別演出

##### 📖 カード図鑑（コレクションアルバム）
- **図鑑機能**
  - 全12種類のカードコレクション表示
  - 取得済み/未取得の視覚的表示
  - コンプリート率とプログレスバー
  - 未入手カードにヒント表示で探究心を刺激

- **コンプリート報酬**
  - 25%達成：250ポイント＋バッジ
  - 50%達成：500ポイント＋バッジ
  - 75%達成：750ポイント＋バッジ
  - 100%達成：1000ポイント＋特別バッジ

##### 🏅 達成バッジシステム拡充（40種類以上）
- **連続達成バッジ**：7日、14日、30日、60日、90日、365日
- **ステージバッジ**：各成長ステージ到達時
- **習慣数バッジ**：5個、10個、20個、30個管理
- **達成率バッジ**：80%、90%、95%、100%達成
- **レベルバッジ**：各レベル到達時
- **ポイントバッジ**：100pt、500pt、1000pt、5000pt獲得
- **専門家バッジ**：各カテゴリー100日達成
- **チャレンジバッジ**：10個、50個、100個、500個達成
- **特別バッジ**：早起き、夜型、週末戦士など

##### 🎨 UI/UX改善
- **ホーム画面改善**
  - 習慣カードに「完」スタンプ表示（当日達成時）
  - アクティブイベント表示セクション追加
  - カテゴリー別の視覚的グループ化強化

- **統計機能改善**
  - 曜日別達成率を毎日の習慣のみから算出
  - より正確な達成データの可視化

- **カード図鑑UI**
  - 見やすい背景色とコントラスト
  - モーダル背景の不透明度向上（98%）
  - カードアイテムの視認性改善

#### 🔧 技術的改善
- イベントシステムのデータ構造追加
- カード図鑑のデータ構造追加
- ブースト効果のポイント計算統合
- 初期化時の自動チェック機能

### 2025年1月14日 - v2.1.0
#### ✨ 新機能
- 📅 習慣の頻度別表示
  - 毎日の習慣と週の習慣を分離表示
  - それぞれでカテゴリー別グループ化
  
- ✏️ カテゴリー編集機能
  - 習慣詳細画面でカテゴリー変更可能
  - 即座に保存・反映

### 2025年1月13日 - v2.0.0
#### ✨ 新機能
- 🏆 チャレンジシステム実装
  - デイリー/ウィークリーチャレンジ（15種類/8種類）
  - カスタムチャレンジ作成
  - 達成統計（ストリーク、今週の達成数、総達成数）
  - 取り消し機能
  
- 📂 カテゴリー別表示
  - 4つのカテゴリー（勉強・運動・読書・養生）
  - トグル開閉機能
  - 状態保存
  
- 💰 ポイントシステム強化
  - 努力ボーナスのカテゴリー化（11種類）
  - 無制限使用可能
  - チャレンジポイント
  - トランザクション履歴（最新100件）
  - レベルシステム（10段階+超越者）

#### 🐛 バグ修正
- チャレンジ達成時のポイント追加バグ修正
- チャレンジ取消時のポイント減算修正
- 努力ボーナスポイント反映修正
- カード画面のスワイプナビゲーション修正
- UI表示の各種調整

### 2025年1月12日 - v1.5.0
- ポイントシステム実装
- レベル機能追加
- カスタム報酬作成機能
- 努力ボーナスシステム

## 🤝 貢献

プルリクエストやIssueの作成を歓迎します！
- バグ報告: [Issues](https://github.com/Yusuke0018/PDCA-Lab/issues)
- 機能提案: [Discussions](https://github.com/Yusuke0018/PDCA-Lab/discussions)

## 📄 ライセンス

MIT License

## 👥 作者

Yusuke0018

## 🙏 謝辞

このアプリの開発にあたり、多くのオープンソースプロジェクトから学びました。
すべての貢献者に感謝します。

---

**習慣は人生を変える。PDCA-Labで理想の自分へ。** 🚀